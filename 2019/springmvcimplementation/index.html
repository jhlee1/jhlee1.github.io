<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Code Repository  | Spring MVC Implementation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css" />
    <link rel="stylesheet" href="https://jhlee1.github.io/css/blog.css" />
    
</head>
<body>

    
    <nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://jhlee1.github.io/">Home</a>
        </div>
    </nav>
    

    
    <section class="hero is-info is-medium">
        <div class="hero-body" style="background-image: url(https://jhlee1.github.io/img/bg-blog.jpg);">
            <div class="container has-text-centered">
                <br>
                <h1 class="title is-size-1">
                    
                        Spring MVC Implementation
                    
                </h1>
                
            </div>
        </div>
    </section>


<div class="container">
    <div class="section">
    

<div class="columns">
    <div class="column is-9">
        <div class="tile is-child box">
            <div class="content">
                

<h2 id="spring-mvc-실습">Spring MVC 실습</h2>

<h3 id="1-controller-작성-실습">1. Controller 작성 실습</h3>

<ul>
<li>브라우저에서 <code>http://localhost:8080/mvcexam/plusform</code>이라고 요청을 보내면 서버는 2개의 값을 입력받을 수 있는 입력 창과 버튼이 있는 화면을 보여줌</li>
<li>2개의 값을 입력하고 버튼을 클릭하면 <code>POST http://localhost:8080/mvcexam/plus</code>로 2개의 입력값이 전달됨. 서버는 두 값을 더한 후 jsp에게 request scope로 전달하여 출력</li>
</ul>

<h3 id="2-프로젝트-세팅">2. 프로젝트 세팅</h3>

<ul>
<li>maven 프로젝트에서 archetype을 webapp으로 생성</li>

<li><p>pom.xml 설정</p>

<ul>
<li><p>Dependency와 Plugin에 Maven compiler, JSTL, Servlet JSP, Spring 관련 설정들을 넣어준다.</p>

<pre><code>&lt;properties&gt;
&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
&lt;spring.version&gt;4.3.5.RELEASE&lt;/spring.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
...

&lt;!-- Spring Spring MVC --&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
&lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
&lt;version&gt;${spring.version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- Servlet JSP JSTL --&gt;
&lt;dependency&gt;
&lt;groupId&gt;javax.servlet&lt;/groupId&gt;
&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
&lt;version&gt;3.1.0&lt;/version&gt;
&lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
&lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;
&lt;version&gt;2.3.1&lt;/version&gt;
&lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;jstl&lt;/groupId&gt;
&lt;artifactId&gt;jstl&lt;/artifactId&gt;
&lt;version&gt;1.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;build&gt;
&lt;finalName&gt;mvcexam&lt;/finalName&gt;
&lt;pluginManagement&gt;
&lt;plugins&gt;
...

&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.6.1&lt;/version&gt;
  &lt;configuration&gt;
    &lt;source&gt;1.8&lt;/source&gt;
    &lt;target&gt;1.8&lt;/target&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;

...

&lt;/plugins&gt;
&lt;/pluginManagement&gt;
&lt;/build&gt;
&lt;/project&gt;
</code></pre></li>
</ul></li>
</ul>

<h3 id="3-dispatcherservlet을-frontcontroller로-설정">3. DispatcherServlet을 FrontController로 설정</h3>

<ul>
<li><p>3가지 방법이 존재한다. 주로 1번과 2번 방법을 사용</p>

<ol>
<li><p>web.xml 파일에 설정</p></li>

<li><p>org.springframework.web.WebApplicationInitializer 인터페이스를 이용해서 구현</p></li>

<li><p>javax.servlet.ServletContainerInitializer 사용</p>

<ul>
<li>Servlet 3.0 이상에서 web.xml 파일 대신 사용 가능</li>
</ul></li>
</ol></li>

<li><p>web.xml 파일에 설정 (1번 방법)</p>

<ul>
<li>xml 파일과 java파일을 이용해서  DispatcherServlet을 설정할 수 있다.</li>
</ul></li>
</ul>

<p>ex) WebMVCContextConfig.xml에서 설정을 읽어들이는 방법</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;
&lt;web-app&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
      &lt;param-value&gt;classpath:WebMVCContextConfig.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/servlet&gt;
&lt;/web-app&gt;
</code></pre>

<p>ex) java config spring 설정을 읽어들이는 방법</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;
&lt;web-app&gt;
  &lt;display-name&gt;Spring JavaConfig Example&lt;/display-name&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;mvc&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;contextClass&lt;/param-name&gt;
      &lt;param-value&gt;org.springframework.web.context.support.AnnotationConfigWebApplicationContext&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
      &lt;param-value&gt;lee.joohan.webmvc.config.WebMvcContextConfiguration&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;mvc&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre>

<ul>
<li>org.springframework.web.WebApplicationInitializer 인터페이스를 이용해서 구현 (2번 방법)

<ul>
<li>Spring MVC는 ServletContainerInitializer를 구현하고 있는 SpringServletContainerInitializer를 제공</li>
<li>SpringServletContainerInitializer는 WebApplicationInitializer 구현체를 찾아서 객체를 만들고 해당 객체의 onStartup을 호출하여 초기화 (첫 웹앱 시작에 다소 시간이 걸림)</li>
</ul></li>
</ul>

<p>ex)</p>

<pre><code class="language-java">import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;

import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;

public class SpringWebApplicationInitializer implements WebApplicationInitializer {
    public static final String DISPATCHER_SERVLET_NAME = &quot;dispatcher&quot;;

    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        registerDispatcherServlet(servletContext);
    }

    private void registerDispatcherServlet(ServletContext servletContext) {
        AnnotationConfigWebApplicationContext dispatcherContext = createContext(WebMVCContextConfiguration.class); //WebMVCContextConfiguration.class라는 java config 파일은 아래에
        ServletRegistration.Dynamic dispatcher = servletContext.addServlet(DISPATCHER_SERVLET_NAME, new DispatcherServlet(dispatcherContext));

        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping(&quot;/&quot;);
    }

    private AnnotationConfigWebApplicationContext createContext(final Class&lt;?&gt; annotatedClasses) {
        AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();

        context.register(annotatedClasses);
        return context;
    }
}

</code></pre>

<p>WebMvcContextConfiguration.java</p>

<pre><code>package lee.joohan.webmvc.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.*;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan(basePackages = {&quot;lee.joohan.webmvc.controller&quot;})
public class WebMvcContextConfiguration extends WebMvcConfigurerAdapter {

    //모든 Request를 Controller에게 Mapping 되어있지 않은 CSS와 image 같은 요청의 경우 따로 처리
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler(&quot;/assets/**&quot;).addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;).setCachePeriod(31556926);
        registry.addResourceHandler(&quot;/css/**&quot;).addResourceLocations(&quot;/css/&quot;).setCachePeriod(31556926);
        registry.addResourceHandler(&quot;/img/**&quot;).addResourceLocations(&quot;/img/&quot;).setCachePeriod(31556926);
        registry.addResourceHandler(&quot;/js/**&quot;).addResourceLocations(&quot;/js/&quot;).setCachePeriod(31556926);
    }

    // Default servlet handler를 사용 (Mapping정보가 없는 URL의 경우 WAS에게 넘겨 DefaultServlet을 통해 처리하도록
    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

    @Override
    public void addViewControllers(final ViewControllerRegistry registry) {
        registry.addViewController(&quot;/&quot;).setViewName(&quot;main&quot;); // 특정 url의 경우 따로 controller를 거치지 않고 view를 보여주도록 설정
    }

    @Bean
    public InternalResourceViewResolver getInternalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();

        resolver.setPrefix(&quot;/WEB-INF/views/&quot;);
        resolver.setSuffix(&quot;.jsp&quot;);

        return resolver;
    }
}

</code></pre>

<ul>
<li><p>@Configuration</p>

<ul>
<li>Java Config 파일인 것을 알려줌</li>
<li>org.springframework.context.annotation의 Configuration Annotation과 Bean Annotation 코드를 이용해서 Spring Container에 새로운 Bean 객체 생성</li>
</ul></li>

<li><p>@EnableWebMvc</p>

<ul>
<li>DispatcherServlet의 RequestMappingHandlerMapping, RequestMappingHandlerAdapter, ExceptionHandlerExceptionResolver, MessageConverter 등 Web에 필요한 빈들을 대부분 자동으로 설정해준다.</li>
<li>xml 설정에서 <a href="mvc:annotation-driven/">mvc:annotation-driven/</a> 와 동일하다.</li>
<li>기본 설정 이외의 설정이 필요하다면 org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter 를 상속받도록 Java config class를 작성한 후, 필요한 메소드를 @Override 하면됨</li>
</ul></li>

<li><p>@ComponentScan</p>

<ul>
<li>Controller, Service, Repository, Component애노테이션이 붙은 클래스를 찾아 스프링 컨테이너가 관리하게 된다.</li>
<li>DefaultAnnotationHandlerMapping과 RequestMappingHandlerMapping구현체는 다른 Handler Mapping보다 훨씬 더 정교한 작업을 수행한다.</li>
<li>Spring Container(= AppicationContext)에 있는 요청 처리 Bean에서 RequestMapping Annotation을 클래스나 메소드에서 찾아 HandlerMapping객체를 생성하게 된다.</li>
<li>HandlerMapping은 서버로 들어온 요청을 어느 핸들러로 전달할지 결정하는 역할을 수행한다.</li>
<li>DefaultAnnotationHandlerMapping은 DispatcherServlet이 기본으로 등록하는 기본 핸들러 맵핑 객체이고, RequestMappingHandlerMapping은 더 강력하고 유연하지만 사용하려면 명시적으로 설정해야 한다</li>
</ul></li>
</ul>

<h3 id="4-controller-handler-클래스-만들기">4. Controller(Handler) 클래스 만들기</h3>

<ul>
<li>@Controller Annotation을 클래스 위에 붙인다</li>
<li>Mapping을 위해 @RequestMapping Annotation을 클래스나 메소드에서 사용</li>

<li><p>@RequestMapping</p>

<ul>
<li>Http 요청과 이를 다루기 위한 Controller 의 메소드를 연결하는 Annotation</li>
<li>Http Method 와 연결하는 방법</li>
<li>@RequestMapping(value=&ldquo;/users&rdquo;, method=RequestMethod.POST)</li>
<li>Spring 4.3 이상에선 아래와 같이 사용 가능

<ul>
<li>@GetMapping</li>
<li>@PostMapping</li>
<li>@PutMapping</li>
<li>@DeleteMapping</li>
<li>@PatchMapping</li>
</ul></li>
<li>Http 특정 해더와 연결하는 방법</li>
<li>@RequestMapping(method = RequestMethod.GET, headers = &ldquo;content-type=application/json&rdquo;)</li>
<li>Http Parameter 와 연결하는 방법</li>
<li>@RequestMapping(method = RequestMethod.GET, params = &ldquo;type=raw&rdquo;)</li>
<li>Content-Type Header 와 연결하는 방법</li>
<li>@RequestMapping(method = RequestMethod.GET, consumes = &ldquo;application/json&rdquo;)</li>
<li>Accept Header 와 연결하는 방법</li>
<li>@RequestMapping(method = RequestMethod.GET, produces = &ldquo;application/json&rdquo;)</li>
</ul></li>

<li><p>Spring MVC가 지원하는 Controller메소드 인수 타입</p>

<ul>
<li>javax.servlet.ServletRequest</li>
<li><strong>javax.servlet.http.HttpServletRequest</strong></li>
<li>org.springframework.web.multipart.MultipartRequest</li>
<li>org.springframework.web.multipart.MultipartHttpServletRequest</li>
<li>javax.servlet.ServletResponse</li>
<li><strong>javax.servlet.http.HttpServletResponse</strong></li>
<li><strong>javax.servlet.http.HttpSession</strong></li>
<li>org.springframework.web.context.request.WebRequest</li>
<li>org.springframework.web.context.request.NativeWebRequest</li>
<li>java.util.Locale</li>
<li>java.io.InputStream</li>
<li>java.io.Reader</li>
<li>java.io.OutputStream</li>
<li>java.io.Writer</li>
<li>javax.security.Principal</li>
<li>java.util.Map</li>
<li>org.springframework.ui.Model</li>
<li>org.springframework.ui.ModelMap</li>
<li><strong>org.springframework.web.multipart.MultipartFile</strong></li>
<li>javax.servlet.http.Part</li>
<li>org.springframework.web.servlet.mvc.support.RedirectAttributes</li>
<li>org.springframework.validation.Errors</li>
<li>org.springframework.validation.BindingResult</li>
<li>org.springframework.web.bind.support.SessionStatus</li>
<li>org.springframework.web.util.UriComponentsBuilder</li>
<li>org.springframework.http.HttpEntity&lt;?&gt;</li>
<li>Command 또는 Form 객체</li>
</ul></li>

<li><p><strong>Spring MVC가 지원하는 메소드 인수 애노테이션</strong></p>

<ul>
<li><strong>@RequestParam</strong></li>
<li>Mapping된 메소드의 Argument에 붙일 수 있는 어노테이션</li>
<li>@RequestParam의 name에는 http parameter의 name과 멥핑</li>
<li>@RequestParam의 required는 필수인지 아닌지 판단</li>
<li><strong>@RequestHeader</strong></li>
<li>요청 정보의 헤더 정보를 읽어들 일 때 사용@RequestHeader(name=&ldquo;헤더명&rdquo;) String 변수명</li>
<li><strong>@RequestBody</strong></li>
<li>@RequestPart</li>
<li><strong>@ModelAttribute</strong></li>
<li><strong>@PathVariable</strong></li>
<li>@RequestMapping의 path에 변수명을 입력받기 위한 place holder가 필요함</li>
<li>place holder의 이름과 PathVariable의 name 값과 같으면 mapping 됨</li>
<li>required 속성은 default true 임</li>
<li>@CookieValue</li>
</ul></li>
</ul>

<p>요</p>

<ul>
<li><strong>Spring MVC가 지원하는 메소드 리턴 값</strong>

<ul>
<li><strong>org.springframework.web.servlet.ModelAndView</strong></li>
<li>org.springframework.ui.Model</li>
<li>java.util.Map</li>
<li>org.springframework.ui.ModelMap</li>
<li>org.springframework.web.servlet.View</li>
<li><strong>java.lang.String</strong></li>
<li>java.lang.Void</li>
<li>org.springframework.http.HttpEntity&lt;?&gt;</li>
<li>org.springframework.http.ResponseEntity&lt;?&gt;</li>
<li>등등</li>
</ul></li>
</ul>

<p><strong>PlusController.java</strong></p>

<pre><code class="language-java">package lee.joohan.webmvc.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
public class PlusController {
    @GetMapping(path = &quot;/plusform&quot;)
    public String getPlusForm() {
        return &quot;plusForm&quot;;
    }

    @PostMapping(path = &quot;/plus&quot;)
    public String plus(@RequestParam(name = &quot;value1&quot;, required = true) int value1,
                       @RequestParam(name = &quot;value2&quot;, required = true) int value2, ModelMap modelMap) {
        modelMap.addAttribute(&quot;value1&quot;, value1);
        modelMap.addAttribute(&quot;value2&quot;, value2);
        modelMap.addAttribute(&quot;result&quot;, value1 + value2);

        return &quot;plusResult&quot;;
    }
}

</code></pre>

<p><strong>plusForm.jsp</strong></p>

<pre><code class="language-jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Plus form&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form method=&quot;POST&quot; action=&quot;plus&quot;&gt;
        value1: &lt;input type=&quot;text&quot; name=&quot;value1&quot;&gt;&lt;br/&gt;
        value2: &lt;input type=&quot;text&quot; name=&quot;value2&quot;&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;확인&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p><strong>plusResult.jsp</strong></p>

<pre><code class="language-jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Plus Result&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    ${value1} + ${value2} = ${result}
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h3 id="5-추가-실습">5. 추가 실습</h3>

<ul>
<li>기능 추가 1

<ul>
<li><a href="http://localhost:8080/mvcexam/userform">http://localhost:8080/mvcexam/userform</a> 으로 요청을 보내면 이름, email, 나이를 물어보는 폼이 보여진다.</li>
<li>폼에서 값을 입력하고 확인을 누르면 post방식으로 <a href="http://localhost:8080/mvcexam/regist">http://localhost:8080/mvcexam/regist</a> 에 정보를 전달하게 된다.</li>
<li>regist에서는 입력받은 결과를 콘솔 화면에 출력한다.</li>
</ul></li>
</ul>

<p><strong>UserController.java</strong></p>

<pre><code class="language-java">package lee.joohan.webmvc.controller;

import lee.joohan.webmvc.dto.User;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;

@Controller
public class UserController {
    @GetMapping(path = &quot;/userform&quot;)
    public String getUserForm() {
        return &quot;UserForm&quot;;
    }

    @PostMapping(path = &quot;/regist&quot;)
    public String regist(@ModelAttribute User user) { // Model을 바로 받기
        System.out.println(&quot;The user from input: &quot; + user);

        return &quot;Regist&quot;;
    }
}

</code></pre>

<p><strong>UserForm.jsp</strong></p>

<pre><code class="language-jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;User Form&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form method=&quot;post&quot;, action=&quot;regist&quot;&gt;
    name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br/&gt;
    email: &lt;input type=&quot;text&quot; name=&quot;email&quot;&gt;&lt;br/&gt;
    age: &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;&lt;br/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;확인&quot;&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p><strong>Regist.jsp</strong></p>

<pre><code class="language-jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Registered&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Registered&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p><strong>User.java (DTO)</strong></p>

<pre><code class="language-java">package lee.joohan.webmvc.dto;

public class User {
    private String name;

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;name='&quot; + name + '\'' +
                &quot;, email='&quot; + email + '\'' +
                &quot;, age=&quot; + age +
                '}';
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    private String email;
    private int age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

</code></pre>

<ul>
<li>기능 추가 2

<ul>
<li><a href="http://localhost:8080/mvcexam/goods/{id">http://localhost:8080/mvcexam/goods/{id</a>} 으로 요청을 보낸다.</li>
<li>서버는 id를 콘솔에 출력하고, 사용자의 브라우저 정보를 콘솔에 출력한다.</li>
<li>서버는 HttpServletRequest를 이용해서 사용자가 요청한 PATH정보를 콘솔에 출력한다.</li>
</ul></li>
</ul>

<p><strong>GoodsController.java</strong></p>

<pre><code class="language-java">package lee.joohan.webmvc.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestHeader;

import javax.servlet.http.HttpServletRequest;

@Controller
public class GoodsController {
    @GetMapping(&quot;/goods/{id}&quot;)
    public String getGoodsById(@PathVariable(name = &quot;id&quot;) int id, @RequestHeader(value = &quot;User-Agent&quot;, defaultValue = &quot;myBrowser&quot;) String userAgent,
                               HttpServletRequest request, ModelMap model) {
        String path = request.getServletPath();

        System.out.println(&quot;id: &quot; + id);
        System.out.println(&quot;user_agent: &quot; + userAgent);
        System.out.println(&quot;path: &quot; + path);

        model.addAttribute(&quot;id&quot;, id);
        model.addAttribute(&quot;userAgent&quot;, userAgent);
        model.addAttribute(&quot;path&quot;, path);

        return &quot;GoodsById&quot;;
    }
}

</code></pre>

<p><strong>GoodsById.jsp</strong></p>

<pre><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Goods by Ids&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
id: ${id} &lt;br/&gt;
user_agent: ${userAgent} &lt;br/&gt;
path: ${path} &lt;br/&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

            </div>
        </div>
    </div>
    <div class="column is-3">
        <div class="card">
    <div class="card-content">
        <h1 class="title is-5">Tags</h1>
        <div class="tags">
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/algorithm">algorithm</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/binary_search">binary_search</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/bubblesort">bubblesort</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/database">database</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/edwith">edwith</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/hackerrank">hackerrank</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/javascript">javascript</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/jdbc">jdbc</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/jsp">jsp</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/k-mooc">k-mooc</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/maven">maven</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/microservice">microservice</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/mysql">mysql</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/need-to-read">need-to-read</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/quicksort">quicksort</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/restapi">restapi</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/servlet">servlet</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/spring">spring</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/sql">sql</a></span>
        
            <span class="tag"><a href="https://jhlee1.github.io/tags/webprogramming">webprogramming</a></span>
        
        </div>          
    </div>
</div><br>
        <div class="card">
    <div class="card-content">
        <h1 class="title is-5">Recent posts</h1>
        
            <h1><a href="https://jhlee1.github.io/2019/javascriptobjectliteral/">Object literal and this</a></h1>
            <time class="has-text-grey-light is-size-7">7 May 2019</time>
        
            <h1><a href="https://jhlee1.github.io/2019/javascriptarrayfunctionalmethod/">Javascript Functional Method in Array</a></h1>
            <time class="has-text-grey-light is-size-7">7 May 2019</time>
        
            <h1><a href="https://jhlee1.github.io/2019/restcontroller/">RestController</a></h1>
            <time class="has-text-grey-light is-size-7">6 May 2019</time>
        
            <h1><a href="https://jhlee1.github.io/2019/layeredarchitecture/">LayeredArchitecture</a></h1>
            <time class="has-text-grey-light is-size-7">5 May 2019</time>
        
            <h1><a href="https://jhlee1.github.io/2019/layeredarchitectureimplementation/">LayeredArchitectureImplementation</a></h1>
            <time class="has-text-grey-light is-size-7">5 May 2019</time>
        
    </div>
</div>
    <br>
                
  



<div class="card">
    <div class="card-content">
        <h1 class="title is-5">Related posts</h1>
      
      
            <h1><a href="https://jhlee1.github.io/2019/javascriptobjectliteral/">Object literal and this</a></h1>
            <time class="has-text-grey-light is-size-7">7 May 2019</time>
      
            <h1><a href="https://jhlee1.github.io/2019/javascriptarrayfunctionalmethod/">Javascript Functional Method in Array</a></h1>
            <time class="has-text-grey-light is-size-7">7 May 2019</time>
      
            <h1><a href="https://jhlee1.github.io/2019/restcontroller/">RestController</a></h1>
            <time class="has-text-grey-light is-size-7">6 May 2019</time>
      
            <h1><a href="https://jhlee1.github.io/2019/layeredarchitecture/">LayeredArchitecture</a></h1>
            <time class="has-text-grey-light is-size-7">5 May 2019</time>
      
            <h1><a href="https://jhlee1.github.io/2019/layeredarchitectureimplementation/">LayeredArchitectureImplementation</a></h1>
            <time class="has-text-grey-light is-size-7">5 May 2019</time>
      
            <h1><a href="https://jhlee1.github.io/2019/springmvc/">Spring MVC</a></h1>
            <time class="has-text-grey-light is-size-7">29 April 2019</time>
      
            <h1><a href="https://jhlee1.github.io/2019/springjdbcimplementation/">Spring JDBC Implementation</a></h1>
            <time class="has-text-grey-light is-size-7">25 April 2019</time>
      
    </div>
</div>

    
<br>
        <div class="card">
    <div class="card-content">
        <h1 class="title is-5">Archives</h1>
        
            <a href="https://jhlee1.github.io/archives/2019">2019</a> (36)<br>
        
            <a href="https://jhlee1.github.io/archives/0001">0001</a> (1)<br>
        
    </div>
</div>

    </div>
</div>


    </div>
</div>

<footer class="footer has-background-grey-darker has-text-white">
    <div class="content has-text-centered">
        <p>
            <span class="icon is-large"><a href="https://twitter.com/" class="mysocial"><i class="fab fa-twitter fa-3x"></i></a></span>&nbsp;&nbsp;
            <span class="icon is-large"><a href="https://www.youtube.com/" class="mysocial"><i class="fab fa-youtube fa-3x"></i></a></span>&nbsp;&nbsp;
            <span class="icon is-large"><a href="https://github.com/" class="mysocial"><i class="fab fa-github fa-3x"></i></a></span>&nbsp;&nbsp;
            <br><br>
            Copyright &copy; Code Repository 2019 - Theme by <a href="https://jeffprod.com" class="mysocial">JeffProd.com</a>
            - <a class="mysocial" href="https://jhlee1.github.io/about">About</a>
        </p>
    </div>
</footer>

<script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js"></script>
</body>
</html>
